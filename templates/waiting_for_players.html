{% extends "base.html" %}

{% block head %}
    <!--<meta http-equiv="refresh" content="2; url={{ url_for('game_get') }}" >-->
<script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
{% endblock %}

{% block body %}
    {{ round.join_code }}
    <br>
    Oczekiwanie na graczy
    <br>
    {{ round.players|count }} gracz(y) / {{ round.player_count }} graczy

    <script>
        const socket = io({autoConnect : true})
        console.log('Czy połączono po inicjalizacji:', socket.connected);

        socket.on('connect', () => {
            socket.on('reload', () => {
                console.log('reload')
                location.reload();
            });
        });
        socket.on('redirect', (url) => {
            console.log(url)
            window.location.href = url;
        });



    </script>

{% endblock %}